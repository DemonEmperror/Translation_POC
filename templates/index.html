<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Story Page</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 2rem;
      line-height: 1.8;
      max-width: 800px;
      margin: auto;
    }
    h1 {
      color: #333;
      margin-bottom: 1rem;
    }
    p {
      margin-bottom: 1.2rem;
      text-align: justify;
      white-space: pre-line; /* ✅ preserve newlines from translation */
    }
    #translate-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0px 4px 6px rgba(0,0,0,0.2);
      transition: background 0.3s;
    }
    #translate-btn:hover {
      background: #0056b3;
    }
    #translate-btn svg {
      width: 22px;
      height: 22px;
      fill: white;
    }
  </style>
</head>
<body>

  <h1>English Story</h1>

  <p id="story">
Once upon a time in a quiet village nestled between rolling hills, there lived a young boy named Arjun. 
Arjun loved exploring the forests near his home, where tall trees whispered secrets in the wind and birds 
sang melodies that filled his heart with wonder. Every morning, he would pack a small satchel with bread, 
cheese, and a flask of water, and set off on adventures that carried him deep into the unknown.  

One day, while wandering farther than ever before, Arjun stumbled upon a hidden clearing. At the center 
stood an ancient oak tree, its branches stretching high into the clouds. Beneath its roots glowed a faint 
golden light. Curious, Arjun knelt down and brushed away the soil, revealing a small wooden box. Inside the 
box lay a silver pendant shaped like a crescent moon.  

The moment he touched it, the forest around him shimmered as if alive with magic. Birds flew in patterns 
that seemed to spell messages, and the rustling of the leaves formed a gentle song. A voice whispered in 
his ear, "You are the guardian of the forest now."  

Over the weeks that followed, Arjun discovered that the pendant gave him the ability to understand animals 
and hear the language of trees. He became the protector of the woods, helping lost travelers find their way, 
guiding streams to nourish thirsty fields, and ensuring harmony between the villagers and the forest.  

Years later, as Arjun grew older, the legend of the "Boy Guardian" spread far and wide. Yet Arjun never sought 
fame. His greatest joy was the quiet knowledge that he had kept the forest alive, its heart beating strong, 
so that future generations would also know the beauty and magic hidden within its depths.
  </p>

  <!-- Floating Translate Button -->
  <button id="translate-btn" title="Translate to Spanish">
    <!-- Globe/translate SVG Icon -->
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
      <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 
               10-4.48 10-10S17.52 2 12 2zm-1 
               17.93c-3.95-.49-7-3.85-7-7.93 
               0-.62.08-1.21.21-1.79L9 15v1c0 
               1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H9v-2h2c.55 
               0 1-.45 1-1V7h2c.9 0 1.64-.58 
               1.9-1.39 1.45 1.45 2.1 3.44 
               1.6 5.39-.49 1.95-2.05 3.51-4 
               4z"/>
    </svg>
  </button>

  <script>
    document.getElementById("translate-btn").addEventListener("click", async () => {
      const storyEl = document.getElementById("story");
      const text = storyEl.innerText;

      const response = await fetch("/translate", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ text: text })
      });

      const data = await response.json();

      if (data.translated_text) {
        // ✅ replace content and keep formatting
        storyEl.innerText = data.translated_text;
      } else {
        alert("Translation failed: " + data.error);
      }
    });
  </script>

</body>
</html>
